<html>
<head>
	<meta http-equiv="Content-Script-Type" content="text/javascript">
</head>
<body>

<!--ここをPOSTで送るようにする。-->

<script>
var req = new XMLHttpRequest();

// ハンドラの登録.
req.onreadystatechange = function() {
    switch ( req.readyState ) {
        case 0:
            // 未初期化状態.
            console.log( 'uninitialized!' );
            break;
        case 1: // データ送信中.
            console.log( 'loading...' );
            break;
        case 2: // 応答待ち.
            console.log( 'loaded.' );
            break;
        case 3: // データ受信中.
            console.log( 'interactive... '+req.responseText.length+' bytes.' );
            break;
        case 4: // データ受信完了.
            if( req.status == 200 || req.status == 304 ) {
                var data = req.responseText; // responseXML もあり
                console.log( 'COMPLETE! :'+data );
            } else {
                console.log( 'Failed. HttpStatus: '+req.statusText );
            }
            break;
		}
	}

function displayTweet(){

	var arrayTweet = JSON.parse('<?php echo $jsonResult; ?>');
}

function execPost() {
	var param = "tweet_text=seinoyorokobi";
	req.open('POST', '../php/tweet_post.php', true);
	// POST 送信の場合は Content-Type は固定.
	req.setRequestHeader( 'Content-Type', 'application/x-www-form-urlencoded' );

	req.send(param);
	req.abort(); // 再利用する際にも abort() しないと再利用できないらしい.
}


</script>

<a onClick="execPost()">POST送信</a>
	<form action="tweetManager.php" method="post">
	    <input type="hidden" name="mode" value="tweet_regist">
	    <table>
	        <caption>ツイート登録フォーム</caption>
	        <tr>
	            <td class="item">ツイート内容：</td>
	            <td><input type="text" name="tweet_text" size="40"></td>
	        </tr>
	    </table>
	    <div><input type="submit" name="submit" value="送信"></div>
	</form>

	<form action="tweetManager.php" method="post">
	    <input type="hidden" name="mode" value="user_search">
	    <table>
	        <caption>ユーザー検索</caption>
	        <tr>
	            <td class="item">ユーザー名</td>
	            <td><input type="text" name="user_id" size="40"></td>
	        </tr>
	    </table>
	    <div><input type="submit" name="submit" value="送信"></div>
	</form>


	<table>
		<caption>ツイート一覧</caption>
		<!--javascript利用-->
<!--
	<?php
	foreach($result as $data){
	    echo "<tr>";
	    echo "<td>" . $data[0];
	    echo "</td>";
	    echo "<td>" . $data[1];
	    echo "</td>";
	    echo "<td>" . $data[3];
	    echo "</td>";
	    echo "</tr>";
	    echo "<tr>";
	    echo "<td>ツイート内容:" . $data[2];
	    echo "</td>";
	    echo "</tr>";
	}

	//$query = "select * from tweets where user_id = '".$tmpSess."'";

	 ?>
 -->
	 </table>
 </body>
</html>
